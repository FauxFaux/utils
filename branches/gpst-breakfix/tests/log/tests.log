ok - use GPST;
ok - use GPSTdate;
ok - use GPSTdebug;
ok - use GPSTgeo;
ok - use GPSTxml;
# ========== Executing "run-tests.pl" ==========
# Testing conversion routines...
ok - txt_to_xml("abc")
ok - txt_to_xml("<&>")
ok - txt_to_xml() with multiline string
ok - xml_to_txt("abc")
ok - xml_to_txt("&lt;&amp;&gt;")
ok - xml_to_txt() with multiline string
ok - postgresql_copy_safe() with empty string
ok - postgresql_copy_safe("abcæøåÆØÅ")
ok - postgresql_copy_safe("abc\t'\r\n")
ok - postgresql_copy_safe() with multiline, nulls and stuff
# Testing date routines...
ok - sec_to_string() without separator
ok - sec_to_string() with separator
ok - sec_to_string(-5000) — negative numbers unsupported atm
ok - sec_to_string("")
ok - sec_to_string() with invalid string
ok - sec_to_string() with a bunch of leading zeros
ok - sec_to_string() with decimals
ok - sec_to_string() with decimals and prefixing zeros
ok - sec_to_string() with decimals and extra trailing zeros
ok - sec_to_string() with missing zero before decimal point
ok - sec_to_readable(0)
ok - sec_to_readable() with invalid string
ok - sec_to_readable(86400)
ok - sec_to_readable(86400*1000)
ok - sec_to_readable(86400+7200+180+4)
ok - sec_to_readable("3.14")
ok - sec_to_readable() rejects negative numbers
ok - sec_to_readable() rejects negative decimal
ok - sec_to_readable(), missing zero before decimal point
ok - sec_to_readable() with empty string
# Testing geo routines...
ok - ddd_to_dms("12.34567")
ok - ddd_to_dms("0")
ok - ddd_to_dms("")
ok - ddd_to_dms("pH()rtY tW0")
ok - ddd_to_dms("-12.34567")
ok - ddd_to_dms("0.34567")
ok - ddd_to_dms(".34567")
ok - ddd_to_dms("-.34567")
ok - ddd_to_dms("-0.34567")
ok - ddd_to_dms("180")
ok - ddd_to_dms("-180")
ok - ddd_to_dms("-1")
ok - ddd_to_dms("2-3")
# Testing trackpoint()...
ok - trackpoint() receives empty hash
ok - trackpoint() (gpsml)
ok - trackpoint() (gpx)
ok - trackpoint(): {'format'} with invalid value ("2d") returns undef
ok - trackpoint(): {'lat'} with invalid value ("2d") returns undef
ok - trackpoint(): {'lon'} with invalid value ("2d") returns undef
ok - trackpoint(): {'type'} with invalid value ("2d") returns undef
ok - trackpoint(): {'year'} with empty value skips time
ok - trackpoint(): {'year'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'year'}
ok - trackpoint(): {'year'} is negative, skip time
ok - trackpoint(): Decimals in {'year'}, skip time
ok - trackpoint(): {'month'} with empty value skips time
ok - trackpoint(): {'month'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'month'}
ok - trackpoint(): {'month'} is negative, skip time
ok - trackpoint(): Decimals in {'month'}, skip time
ok - trackpoint(): {'day'} with empty value skips time
ok - trackpoint(): {'day'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'day'}
ok - trackpoint(): {'day'} is negative, skip time
ok - trackpoint(): Decimals in {'day'}, skip time
ok - trackpoint(): {'hour'} with empty value skips time
ok - trackpoint(): {'hour'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'hour'}
ok - trackpoint(): {'hour'} is negative, skip time
ok - trackpoint(): Decimals in {'hour'}, skip time
ok - trackpoint(): {'min'} with empty value skips time
ok - trackpoint(): {'min'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'min'}
ok - trackpoint(): {'min'} is negative, skip time
ok - trackpoint(): Decimals in {'min'}, skip time
ok - trackpoint(): {'sec'} with empty value skips time
ok - trackpoint(): {'sec'} with invalid value ("2d") skips time
ok - trackpoint(): Strip prefixing zeros from {'sec'}
ok - trackpoint(): {'sec'} is negative, skip time
ok - trackpoint(): Remove trailing zeros in {'sec'} decimals
ok - trackpoint(): Missing {'format'}, return undef
ok - trackpoint(): Missing {'type'}, return undef
ok - trackpoint(): Missing {'error'}, return undef
# Testing output from ../gpst
# Read empty input (/dev/null)...
ok - "../gpst </dev/null" - Read from /dev/null
ok - "../gpst </dev/null" - Read from /dev/null (stderr)
ok - "../gpst -o gpx </dev/null" - Output gpx from /dev/null
ok - "../gpst -o gpx </dev/null" - Output gpx from /dev/null (stderr)
# Read empty files...
ok - "echo '<tp> </tp>' | ../gpst" - Don’t print empty trackpoints
ok - "echo '<tp> </tp>' | ../gpst" - Don’t print empty trackpoints (stderr)
# Testing --chronology option...
not ok - "../gpst --chronology chronology-error.gpsml" - Check for chronology errors and duplicated times
#   Failed test '"../gpst --chronology chronology-error.gpsml" - Check for chronology errors and duplicated times'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Chronology errors</title>
# <tp> <time>2006-05-02T09:46:37Z</time> <lat>60.45369</lat> <lon>5.31559</lon> <ele>95</ele> </tp>
# <tp> <time>2006-05-02T09:46:42Z</time> <lat>60.45353</lat> <lon>5.31548</lon> <ele>94</ele> </tp>
# <tp> <time>2006-05-02T09:46:46Z</time> <lat>60.45353</lat> <lon>5.31561</lon> <ele>94</ele> </tp>
# <tp> <time>2006-05-02T09:40:07Z</time> <lat>60.45369</lat> <lon>5.31597</lon> <desc>Out of chronology</desc> </tp>
# <pause>0:00:37:54</pause>
# <tp> <time>2006-05-02T10:18:01Z</time> <lat>60.45418</lat> <lon>5.31517</lon> <ele>92</ele> </tp>
# <tp> <time>2006-05-02T10:18:06Z</time> <lat>60.45407</lat> <lon>5.31542</lon> <ele>91</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <tp> <time>2006-05-02T10:18:10Z</time> <lat>60.45395</lat> <lon>5.31544</lon> <ele>103</ele> </tp>
# <tp> <time>2006-05-02T10:18:11Z</time> <lat>60.45391</lat> <lon>5.31545</lon> <ele>107</ele> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Chronology errors</title>
# <tp> <time>2006-05-02T09:46:37Z</time> <lat>60.45369</lat> <lon>5.31559</lon> <ele>95</ele> </tp>
# <tp> <time>2006-05-02T09:46:42Z</time> <lat>60.45353</lat> <lon>5.31548</lon> <ele>94</ele> </tp>
# <tp> <time>2006-05-02T09:46:46Z</time> <lat>60.45353</lat> <lon>5.31561</lon> <ele>94</ele> </tp>
# <break/>
# <tp> <time>2006-05-02T09:40:07Z</time> <lat>60.45369</lat> <lon>5.31597</lon> <desc>Out of chronology</desc> </tp>
# <break/>
# <pause>0:00:37:54</pause>
# <tp> <time>2006-05-02T10:18:01Z</time> <lat>60.45418</lat> <lon>5.31517</lon> <ele>92</ele> </tp>
# <tp> <time>2006-05-02T10:18:06Z</time> <lat>60.45407</lat> <lon>5.31542</lon> <ele>91</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <tp> <time>2006-05-02T10:18:10Z</time> <lat>60.45395</lat> <lon>5.31544</lon> <ele>103</ele> </tp>
# <tp> <time>2006-05-02T10:18:11Z</time> <lat>60.45391</lat> <lon>5.31545</lon> <ele>107</ele> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst --chronology chronology-error.gpsml" - Check for chronology errors and duplicated times (stderr)
# Testing --skip-dups option...
ok - "../gpst -d no_signal.mayko" - Remove duplicated positions from gpsml
ok - "../gpst -d no_signal.mayko" - Remove duplicated positions from gpsml (stderr)
ok - "../gpst -d -o csv no_signal.mayko" - Remove duplicated positions from csv output format
ok - "../gpst -d -o csv no_signal.mayko" - Remove duplicated positions from csv output format (stderr)
ok - "../gpst -d -o clean no_signal.mayko" - Remove duplicated positions from clean output format
ok - "../gpst -d -o clean no_signal.mayko" - Remove duplicated positions from clean output format (stderr)
ok - "../gpst -d -o pgtab no_signal.mayko" - Remove duplicated positions from pgtab output format
ok - "../gpst -d -o pgtab no_signal.mayko" - Remove duplicated positions from pgtab output format (stderr)
# Testing --epoch option...
ok - "../gpst -e pause.gpx" - --epoch is ignored in gpsml output
ok - "../gpst -e pause.gpx" - --epoch is ignored in gpsml output (stderr)
not ok - "../gpst -e -o gpx pause.gpx" - --epoch is ignored in gpx output
#   Failed test '"../gpst -e -o gpx pause.gpx" - --epoch is ignored in gpx output'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <trkseg>
#       <trkpt lat="60.425494" lon="5.299534"> <ele>25.260</ele> <time>2006-05-21T16:49:11Z</time> </trkpt>
#       <trkpt lat="60.425464" lon="5.299610"> <ele>24.931</ele> <time>2006-05-21T16:49:46Z</time> </trkpt>
#       <trkpt lat="60.425314" lon="5.299694"> <ele>27.975</ele> <time>2006-05-21T16:52:04Z</time> </trkpt>
#       <trkpt lat="60.425384" lon="5.299741"> <ele>31.017</ele> <time>2006-05-21T16:56:36Z</time> </trkpt>
#       <trkpt lat="60.425339" lon="5.299958"> <ele>30.980</ele> <time>2006-05-21T16:56:47Z</time> </trkpt>
#       <trkpt lat="60.425238" lon="5.299640"> <ele>30.538</ele> <time>2006-05-21T16:56:56Z</time> </trkpt>
#       <trkpt lat="60.425246" lon="5.299686"> <ele>30.515</ele> <time>2006-05-21T16:57:03Z</time> </trkpt>
#       <trkpt lat="60.425345" lon="5.299773"> <ele>31.936</ele> <time>2006-05-21T16:59:08Z</time> </trkpt>
#       <trkpt lat="60.425457" lon="5.299419"> <ele>31.794</ele> <time>2006-05-21T17:00:54Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <name>ACTIVE LOG164705</name>
#     <trkseg>
#       <trkpt lat="60.425494" lon="5.299534"> <ele>25.260</ele> <time>2006-05-21T16:49:11Z</time> </trkpt>
#       <trkpt lat="60.425464" lon="5.299610"> <ele>24.931</ele> <time>2006-05-21T16:49:46Z</time> </trkpt>
#       <trkpt lat="60.425314" lon="5.299694"> <ele>27.975</ele> <time>2006-05-21T16:52:04Z</time> </trkpt>
#       <trkpt lat="60.425384" lon="5.299741"> <ele>31.017</ele> <time>2006-05-21T16:56:36Z</time> </trkpt>
#       <trkpt lat="60.425339" lon="5.299958"> <ele>30.980</ele> <time>2006-05-21T16:56:47Z</time> </trkpt>
#       <trkpt lat="60.425238" lon="5.299640"> <ele>30.538</ele> <time>2006-05-21T16:56:56Z</time> </trkpt>
#       <trkpt lat="60.425246" lon="5.299686"> <ele>30.515</ele> <time>2006-05-21T16:57:03Z</time> </trkpt>
#       <trkpt lat="60.425345" lon="5.299773"> <ele>31.936</ele> <time>2006-05-21T16:59:08Z</time> </trkpt>
#       <trkpt lat="60.425457" lon="5.299419"> <ele>31.794</ele> <time>2006-05-21T17:00:54Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
ok - "../gpst -e -o gpx pause.gpx" - --epoch is ignored in gpx output (stderr)
# Testing --fix option...
not ok - "../gpst --fix --chronology chronology-error.gpsml" - Remove bad timestamps
#   Failed test '"../gpst --fix --chronology chronology-error.gpsml" - Remove bad timestamps'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Chronology errors</title>
# <tp> <time>2006-05-02T09:46:37Z</time> <lat>60.45369</lat> <lon>5.31559</lon> <ele>95</ele> </tp>
# <tp> <time>2006-05-02T09:46:42Z</time> <lat>60.45353</lat> <lon>5.31548</lon> <ele>94</ele> </tp>
# <tp> <time>2006-05-02T09:46:46Z</time> <lat>60.45353</lat> <lon>5.31561</lon> <ele>94</ele> </tp>
# <break/>
# <break/>
# <etp err="chrono"> <time>2006-05-02T09:40:07Z</time> <lat>60.45369</lat> <lon>5.31597</lon> <desc>Out of chronology</desc> </etp>
# <pause>0:00:37:54</pause>
# <tp> <time>2006-05-02T10:18:01Z</time> <lat>60.45418</lat> <lon>5.31517</lon> <ele>92</ele> </tp>
# <tp> <time>2006-05-02T10:18:06Z</time> <lat>60.45407</lat> <lon>5.31542</lon> <ele>91</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <etp err="duptime"> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </etp>
# <tp> <time>2006-05-02T10:18:10Z</time> <lat>60.45395</lat> <lon>5.31544</lon> <ele>103</ele> </tp>
# <tp> <time>2006-05-02T10:18:11Z</time> <lat>60.45391</lat> <lon>5.31545</lon> <ele>107</ele> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Chronology errors</title>
# <tp> <time>2006-05-02T09:46:37Z</time> <lat>60.45369</lat> <lon>5.31559</lon> <ele>95</ele> </tp>
# <tp> <time>2006-05-02T09:46:42Z</time> <lat>60.45353</lat> <lon>5.31548</lon> <ele>94</ele> </tp>
# <tp> <time>2006-05-02T09:46:46Z</time> <lat>60.45353</lat> <lon>5.31561</lon> <ele>94</ele> </tp>
# <break/>
# <etp err="chrono"> <time>2006-05-02T09:40:07Z</time> <lat>60.45369</lat> <lon>5.31597</lon> <desc>Out of chronology</desc> </etp>
# <break/>
# <pause>0:00:37:54</pause>
# <tp> <time>2006-05-02T10:18:01Z</time> <lat>60.45418</lat> <lon>5.31517</lon> <ele>92</ele> </tp>
# <tp> <time>2006-05-02T10:18:06Z</time> <lat>60.45407</lat> <lon>5.31542</lon> <ele>91</ele> </tp>
# <tp> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </tp>
# <etp err="duptime"> <time>2006-05-02T10:18:09Z</time> <lat>60.45401</lat> <lon>5.31543</lon> <ele>98</ele> </etp>
# <tp> <time>2006-05-02T10:18:10Z</time> <lat>60.45395</lat> <lon>5.31544</lon> <ele>103</ele> </tp>
# <tp> <time>2006-05-02T10:18:11Z</time> <lat>60.45391</lat> <lon>5.31545</lon> <ele>107</ele> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst --fix --chronology chronology-error.gpsml" - Remove bad timestamps (stderr)
# Testing --from-date option...
# Testing -h (--help) option...
ok - "../gpst -h" - Option -h prints help screen
ok - "../gpst -h" - Option -h prints help screen (stderr)
ok - "../gpst -h" - No Id with only -h
# Testing --inside option...
not ok - "../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --inside multitrack-pause.gpx" - Check --inside option (gpx to gpst)
#   Failed test '"../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --inside multitrack-pause.gpx" - Check --inside option (gpx to gpst)'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <title>track2</title>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <title>track3</title>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <break/>
# <title>track2</title>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <break/>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <break/>
# <title>track3</title>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --inside multitrack-pause.gpx" - Check --inside option (gpx to gpst) (stderr)
# Testing --undefined option...
# Testing --near option...
# Testing --output option...
ok - "../gpst log.mcsv" - Read Mapsource TAB-separated format
ok - "../gpst log.mcsv" - Read Mapsource TAB-separated format (stderr)
ok - "../gpst two-digit_year.mcsv" - Read Mapsource TAB-separated format with two-digit year
ok - "../gpst two-digit_year.mcsv" - Read Mapsource TAB-separated format with two-digit year (stderr)
ok - "../gpst log.gpstxt" - Read Garmin serial text format
ok - "../gpst log.gpstxt" - Read Garmin serial text format (stderr)
ok - "../gpst log.dos.mayko" - Read DOS-formatted Mayko format
ok - "../gpst log.dos.mayko" - Read DOS-formatted Mayko format (stderr)
ok - "../gpst log.dos.gpstxt" - Read DOS-formatted Garmin serial text format
ok - "../gpst log.dos.gpstxt" - Read DOS-formatted Garmin serial text format (stderr)
ok - "../gpst log.unix.mcsv" - Read UNIX-formatted Garmin Mapsource TAB-separated format
ok - "../gpst log.unix.mcsv" - Read UNIX-formatted Garmin Mapsource TAB-separated format (stderr)
not ok - "../gpst multitrack.gpx" - Read GPX file with multiple tracks
#   Failed test '"../gpst multitrack.gpx" - Read GPX file with multiple tracks'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Track 1</title>
# <tp> <time>2003-02-11T23:35:39Z</time> <lat>51.4968266</lat> <lon>-0.1448824</lon> </tp>
# <tp> <time>2003-02-11T23:35:49Z</time> <lat>51.4968227</lat> <lon>-0.1449938</lon> </tp>
# <tp> <time>2003-02-11T23:36:14Z</time> <lat>51.496904</lat> <lon>-0.1453202</lon> </tp>
# <title>Track 2</title>
# <tp> <time>2003-02-11T23:36:16Z</time> <lat>51.4969214</lat> <lon>-0.1453398</lon> </tp>
# <tp> <time>2003-02-11T23:36:31Z</time> <lat>51.4969816</lat> <lon>-0.1455514</lon> </tp>
# <tp> <time>2003-02-11T23:36:43Z</time> <lat>51.4970224</lat> <lon>-0.1457489</lon> <ele>1000</ele> </tp>
# <tp> <time>2003-02-11T23:36:50Z</time> <lat>51.4970452</lat> <lon>-0.1457804</lon> </tp>
# <title>Track 3</title>
# <tp> <time>2003-02-11T23:37:05Z</time> <lat>51.497068</lat> <lon>-0.1458608</lon> </tp>
# <tp> <time>2003-02-11T23:37:22Z</time> <lat>51.4971658</lat> <lon>-0.1460047</lon> </tp>
# <tp> <time>2003-02-11T23:37:36Z</time> <lat>51.4972469</lat> <lon>-0.1461614</lon> </tp>
# <title>Track 4</title>
# <tp> <time>2003-02-11T23:37:43Z</time> <lat>51.4972731</lat> <lon>-0.1462394</lon> </tp>
# <tp> <time>2003-02-11T23:38:04Z</time> <lat>51.4973437</lat> <lon>-0.1463232</lon> </tp>
# <tp> <time>2003-02-11T23:38:28Z</time> <lat>51.4973337</lat> <lon>-0.1462949</lon> </tp>
# <tp> <time>2003-02-11T23:38:34Z</time> <lat>51.4973218</lat> <lon>-0.1462825</lon> </tp>
# <tp> <time>2003-02-11T23:38:35Z</time> <lat>51.4973145</lat> <lon>-0.1462732</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Track 1</title>
# <tp> <time>2003-02-11T23:35:39Z</time> <lat>51.4968266</lat> <lon>-0.1448824</lon> </tp>
# <tp> <time>2003-02-11T23:35:49Z</time> <lat>51.4968227</lat> <lon>-0.1449938</lon> </tp>
# <tp> <time>2003-02-11T23:36:14Z</time> <lat>51.496904</lat> <lon>-0.1453202</lon> </tp>
# <break/>
# <title>Track 2</title>
# <tp> <time>2003-02-11T23:36:16Z</time> <lat>51.4969214</lat> <lon>-0.1453398</lon> </tp>
# <tp> <time>2003-02-11T23:36:31Z</time> <lat>51.4969816</lat> <lon>-0.1455514</lon> </tp>
# <tp> <time>2003-02-11T23:36:43Z</time> <lat>51.4970224</lat> <lon>-0.1457489</lon> <ele>1000</ele> </tp>
# <tp> <time>2003-02-11T23:36:50Z</time> <lat>51.4970452</lat> <lon>-0.1457804</lon> </tp>
# <break/>
# <title>Track 3</title>
# <tp> <time>2003-02-11T23:37:05Z</time> <lat>51.497068</lat> <lon>-0.1458608</lon> </tp>
# <tp> <time>2003-02-11T23:37:22Z</time> <lat>51.4971658</lat> <lon>-0.1460047</lon> </tp>
# <tp> <time>2003-02-11T23:37:36Z</time> <lat>51.4972469</lat> <lon>-0.1461614</lon> </tp>
# <break/>
# <title>Track 4</title>
# <tp> <time>2003-02-11T23:37:43Z</time> <lat>51.4972731</lat> <lon>-0.1462394</lon> </tp>
# <tp> <time>2003-02-11T23:38:04Z</time> <lat>51.4973437</lat> <lon>-0.1463232</lon> </tp>
# <tp> <time>2003-02-11T23:38:28Z</time> <lat>51.4973337</lat> <lon>-0.1462949</lon> </tp>
# <tp> <time>2003-02-11T23:38:34Z</time> <lat>51.4973218</lat> <lon>-0.1462825</lon> </tp>
# <tp> <time>2003-02-11T23:38:35Z</time> <lat>51.4973145</lat> <lon>-0.1462732</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst multitrack.gpx" - Read GPX file with multiple tracks (stderr)
ok - "../gpst compact.gpx" - Read GPX one-liner
ok - "../gpst compact.gpx" - Read GPX one-liner (stderr)
ok - "../gpst missing.gpsml" - Read gpsml with various data missing
ok - "../gpst missing.gpsml" - Read gpsml with various data missing (stderr)
ok - "../gpst different_dateformats.gpsml" - Read different date formats from gpsml file
ok - "../gpst different_dateformats.gpsml" - Read different date formats from gpsml file (stderr)
not ok - "../gpst multitrack-pause.gpx" - Should be equal to multitrack-pause.gpsml
#   Failed test '"../gpst multitrack-pause.gpx" - Should be equal to multitrack-pause.gpsml'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <title>track2</title>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <title>track3</title>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <break/>
# <title>track2</title>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <break/>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <break/>
# <title>track3</title>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <break/>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst multitrack-pause.gpx" - Should be equal to multitrack-pause.gpsml (stderr)
ok - "../gpst -o gpx no_signal.mayko" - Output GPX from Mayko file with duplicates
ok - "../gpst -o gpx no_signal.mayko" - Output GPX from Mayko file with duplicates (stderr)
not ok - "../gpst -o gpx comments.mayko" - Output GPX from Mayko file with commented-out lines
#   Failed test '"../gpst -o gpx comments.mayko" - Output GPX from Mayko file with commented-out lines'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <trkseg>
#       <trkpt lat="70.6800486" lon="23.6746151"> <time>2002-12-22T21:42:24Z</time> </trkpt>
#       <trkpt lat="70.6799322" lon="23.6740038"> <time>2002-12-22T21:42:32Z</time> </trkpt>
#       <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:42:54Z</time> </trkpt>
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:51Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:52Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:54Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <trkpt lat="70.6800774" lon="23.6757566"> <time>2002-12-22T21:44:45Z</time> </trkpt>
#       <trkpt lat="70.6801502" lon="23.6753442"> <time>2002-12-22T21:44:52Z</time> </trkpt>
#       <trkpt lat="70.6801905" lon="23.6757542"> <time>2002-12-22T21:45:04Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <trkseg>
#       <trkpt lat="70.6800486" lon="23.6746151"> <time>2002-12-22T21:42:24Z</time> </trkpt>
#       <trkpt lat="70.6799322" lon="23.6740038"> <time>2002-12-22T21:42:32Z</time> </trkpt>
#       <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:42:54Z</time> </trkpt>
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:51Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:52Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <!-- <trkpt lat="70.6796266" lon="23.6723991"> <time>2002-12-22T21:43:54Z</time> <extensions> <error>desc</error> </extensions> </trkpt> -->
#       <trkpt lat="70.6800774" lon="23.6757566"> <time>2002-12-22T21:44:45Z</time> </trkpt>
#     </trkseg>
#     <trkseg>
#       <trkpt lat="70.6801502" lon="23.6753442"> <time>2002-12-22T21:44:52Z</time> </trkpt>
#       <trkpt lat="70.6801905" lon="23.6757542"> <time>2002-12-22T21:45:04Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
ok - "../gpst -o gpx comments.mayko" - Output GPX from Mayko file with commented-out lines (stderr)
not ok - "../gpst -o gpx missing.gpsml" - Output GPX from gpsml with missing data
#   Failed test '"../gpst -o gpx missing.gpsml" - Output GPX from gpsml with missing data'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <trkseg>
#       <trkpt lat="60.42353" lon="5.34185"> <time>2006-04-30T17:17:09Z</time> </trkpt>
#       <trkpt> <ele>483</ele> <time>2006-04-30T17:17:11Z</time> </trkpt>
#       <trkpt> <ele>485</ele> <time>2006-04-30T17:17:22Z</time> </trkpt>
#       <trkpt lat="60.42347" lon="5.34212"> <ele>486</ele> </trkpt>
#       <trkpt> <ele>484</ele> </trkpt>
#       <trkpt> <ele>486</ele> </trkpt>
#       <trkpt> <ele>490</ele> <time>2006-04-30T17:18:03Z</time> </trkpt>
#       <trkpt lat="60.42338" lon="5.34269"> <ele>487</ele> <time>2006-04-30T17:18:05Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
#   version="1.1"
#   creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
#   xmlns="http://www.topografix.com/GPX/1/1"
#   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#   xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
#   <trk>
#     <name>Missing various elements</name>
#     <trkseg>
#       <trkpt lat="60.42353" lon="5.34185"> <time>2006-04-30T17:17:09Z</time> </trkpt>
#       <trkpt> <ele>483</ele> <time>2006-04-30T17:17:11Z</time> </trkpt>
#       <trkpt> <ele>485</ele> <time>2006-04-30T17:17:22Z</time> </trkpt>
#       <trkpt lat="60.42347" lon="5.34212"> <ele>486</ele> </trkpt>
#       <trkpt> <ele>484</ele> </trkpt>
#       <trkpt> <ele>486</ele> </trkpt>
#       <trkpt> <ele>490</ele> <time>2006-04-30T17:18:03Z</time> </trkpt>
#       <trkpt lat="60.42338" lon="5.34269"> <ele>487</ele> <time>2006-04-30T17:18:05Z</time> </trkpt>
#     </trkseg>
#   </trk>
# </gpx>
# '
ok - "../gpst -o gpx missing.gpsml" - Output GPX from gpsml with missing data (stderr)
not ok - "../gpst -o xgraph multitrack.gpx" - Output xgraph format from GPX
#   Failed test '"../gpst -o xgraph multitrack.gpx" - Output xgraph format from GPX'
#   in ./run-tests.pl at line 1860.
#          got: '-0.1448824 51.4968266
# -0.1449938 51.4968227
# -0.1453202 51.4969040
# -0.1453398 51.4969214
# -0.1455514 51.4969816
# -0.1457489 51.4970224
# -0.1457804 51.4970452
# -0.1458608 51.4970680
# -0.1460047 51.4971658
# -0.1461614 51.4972469
# -0.1462394 51.4972731
# -0.1463232 51.4973437
# -0.1462949 51.4973337
# -0.1462825 51.4973218
# -0.1462732 51.4973145
# '
#     expected: '-0.1448824 51.4968266
# -0.1449938 51.4968227
# -0.1453202 51.4969040
# move -0.1453398 51.4969214
# -0.1455514 51.4969816
# -0.1457489 51.4970224
# -0.1457804 51.4970452
# move -0.1458608 51.4970680
# -0.1460047 51.4971658
# -0.1461614 51.4972469
# move -0.1462394 51.4972731
# -0.1463232 51.4973437
# -0.1462949 51.4973337
# -0.1462825 51.4973218
# -0.1462732 51.4973145
# '
ok - "../gpst -o xgraph multitrack.gpx" - Output xgraph format from GPX (stderr)
ok - "../gpst -o pgtab compact.gpx" - Output pgtab from gpx format
ok - "../gpst -o pgtab compact.gpx" - Output pgtab from gpx format (stderr)
ok - "../gpst -o pgtab no_signal.mayko" - Output pgtab from mayko format
ok - "../gpst -o pgtab no_signal.mayko" - Output pgtab from mayko format (stderr)
ok - "../gpst -o pgtab missing.gpsml" - Output pgtab from missing.gpsml
ok - "../gpst -o pgtab missing.gpsml" - Output pgtab from missing.gpsml (stderr)
ok - "../gpst -o csv log.dos.mayko" - Output csv from DOS-formatted Mayko format
ok - "../gpst -o csv log.dos.mayko" - Output csv from DOS-formatted Mayko format (stderr)
ok - "../gpst -o pgwtab multitrack.gpx" - Test pgwtab format
ok - "../gpst -o pgwtab multitrack.gpx" - Test pgwtab format (stderr)
ok - "../gpst -o pgwupd multitrack.gpx" - Test pgwupd format
ok - "../gpst -o pgwupd multitrack.gpx" - Test pgwupd format (stderr)
ok - "../gpst -t -o clean pause.gpx" - Output clean format with time breaks
ok - "../gpst -t -o clean pause.gpx" - Output clean format with time breaks (stderr)
# Testing --outside option...
not ok - "../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --outside multitrack-pause.gpx" - Check --outside option (gpx to gpst)
#   Failed test '"../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --outside multitrack-pause.gpx" - Check --outside option (gpx to gpst)'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <title>track2</title>
# <title>track3</title>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <break/>
# <title>track2</title>
# <break/>
# <title>track3</title>
# <break/>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst --pos1 2.11,2.12 --pos2 3.31,3.32 --outside multitrack-pause.gpx" - Check --outside option (gpx to gpst) (stderr)
# Testing --pos1 and --pos2 options...
# Testing --require option...
not ok - "../gpst -re multitrack.gpx" - Require elevation from GPX data
#   Failed test '"../gpst -re multitrack.gpx" - Require elevation from GPX data'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Track 1</title>
# <title>Track 2</title>
# <tp> <time>2003-02-11T23:36:43Z</time> <lat>51.4970224</lat> <lon>-0.1457489</lon> <ele>1000</ele> </tp>
# <title>Track 3</title>
# <title>Track 4</title>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>Track 1</title>
# <break/>
# <title>Track 2</title>
# <tp> <time>2003-02-11T23:36:43Z</time> <lat>51.4970224</lat> <lon>-0.1457489</lon> <ele>1000</ele> </tp>
# <break/>
# <title>Track 3</title>
# <break/>
# <title>Track 4</title>
# </track>
# </gpsml>
# '
ok - "../gpst -re multitrack.gpx" - Require elevation from GPX data (stderr)
ok - "../gpst -re one_ele.dos.gpsml" - Require elevation from gpsml
ok - "../gpst -re one_ele.dos.gpsml" - Require elevation from gpsml (stderr)
ok - "../gpst -re missing.gpsml" - Require elevation # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -re missing.gpsml" - Require elevation (stderr) # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rt missing.gpsml" - Require time # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rt missing.gpsml" - Require time (stderr) # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rp missing.gpsml" - Require position # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rp missing.gpsml" - Require position (stderr) # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -ret missing.gpsml" - Require elevation and time # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -ret missing.gpsml" - Require elevation and time (stderr) # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -retp missing.gpsml" - Require elevation, time and position # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -retp missing.gpsml" - Require elevation, time and position (stderr) # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rep missing.gpsml" - Require elevation and position # TODO Shall lat/lon be cleared if one is missing?
ok - "../gpst -rep missing.gpsml" - Require elevation and position (stderr) # TODO Shall lat/lon be cleared if one is missing?
# Testing --round option...
ok - "../gpst -R lat=4,lon=5,ele=1 pause.gpx" - --round works with lat, lon, ele from gpx
ok - "../gpst -R lat=4,lon=5,ele=1 pause.gpx" - --round works with lat, lon, ele from gpx (stderr)
# Testing --short-date option...
# Testing --save-to-file option...
# Testing --create-breaks option...
ok - "../gpst -t pause.gpx" - Output gpsml with <pause> elements from GPX files
ok - "../gpst -t pause.gpx" - Output gpsml with <pause> elements from GPX files (stderr)
not ok - "../gpst -t multitrack-pause.gpx" - Insert <pause> between gpx tracks
#   Failed test '"../gpst -t multitrack-pause.gpx" - Insert <pause> between gpx tracks'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <title>track2</title>
# <pause>0:23:59:58</pause>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <pause>0:01:00:00</pause>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <title>track3</title>
# <pause>1:01:00:03</pause>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <break/>
# <title>track2</title>
# <pause>0:23:59:58</pause>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <pause>0:01:00:00</pause>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <break/>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <break/>
# <title>track3</title>
# <pause>1:01:00:03</pause>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <break/>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst -t multitrack-pause.gpx" - Insert <pause> between gpx tracks (stderr)
not ok - "../gpst -t multitrack-pause.gpsml" - Insert <pause> between gpsml titles
#   Failed test '"../gpst -t multitrack-pause.gpsml" - Insert <pause> between gpsml titles'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <title>track2</title>
# <pause>0:23:59:58</pause>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <pause>0:01:00:00</pause>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <title>track3</title>
# <pause>1:01:00:03</pause>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8"?>
# <gpsml>
# <track>
# <title>track1</title>
# <tp> <time>2006-01-01T00:00:00Z</time> <lat>1.11</lat> <lon>1.12</lon> </tp>
# <tp> <time>2006-01-01T00:00:01Z</time> <lat>1.21</lat> <lon>1.22</lon> </tp>
# <tp> <time>2006-01-01T00:00:02Z</time> <lat>1.31</lat> <lon>1.32</lon> </tp>
# <break/>
# <title>track2</title>
# <pause>0:23:59:58</pause>
# <tp> <time>2006-01-02T00:00:00Z</time> <lat>2.11</lat> <lon>2.12</lon> </tp>
# <tp> <time>2006-01-02T00:00:04Z</time> <lat>2.21</lat> <lon>2.22</lon> </tp>
# <tp> <time>2006-01-02T00:00:16Z</time> <lat>2.31</lat> <lon>2.32</lon> </tp>
# <pause>0:01:00:00</pause>
# <tp> <time>2006-01-02T01:00:16Z</time> <lat>2.41</lat> <lon>2.42</lon> </tp>
# <break/>
# <tp> <time>2006-01-02T01:00:17Z</time> <lat>2.451</lat> <lon>2.452</lon> </tp>
# <break/>
# <title>track3</title>
# <pause>1:01:00:03</pause>
# <tp> <time>2006-01-03T02:00:20Z</time> <lat>3.11</lat> <lon>3.12</lon> </tp>
# <tp> <time>2006-01-03T02:00:21Z</time> <lat>3.21</lat> <lon>3.22</lon> </tp>
# <tp> <time>2006-01-03T02:00:22Z</time> <lat>3.31</lat> <lon>3.32</lon> </tp>
# <break/>
# <tp> <time>2006-01-03T02:00:23Z</time> <lat>3.41</lat> <lon>3.42</lon> </tp>
# <tp> <time>2006-01-03T02:00:24Z</time> <lat>3.51</lat> <lon>3.52</lon> </tp>
# <tp> <time>2006-01-03T02:00:25Z</time> <lat>3.61</lat> <lon>3.62</lon> </tp>
# <tp> <time>2006-01-03T02:00:26Z</time> <lat>3.71</lat> <lon>3.72</lon> </tp>
# <tp> <time>2006-01-03T02:00:27Z</time> <lat>3.81</lat> <lon>3.82</lon> </tp>
# </track>
# </gpsml>
# '
ok - "../gpst -t multitrack-pause.gpsml" - Insert <pause> between gpsml titles (stderr)
# Testing -v (--verbose) option...
ok - "../gpst -hv" - Option --version with -h returns Id string and help screen
ok - "../gpst -hv" - Option --version with -h returns Id string and help screen (stderr)
# Testing --version option...
ok - "../gpst --version" - Option --version returns Id string
ok - "../gpst --version" - Option --version returns Id string (stderr)
# Testing --strip-whitespace option...
not ok - "../gpst -w -o gpx pause.gpx" - Strip whitespace from GPX output
#   Failed test '"../gpst -w -o gpx pause.gpx" - Strip whitespace from GPX output'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
# version="1.1"
# creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
# xmlns="http://www.topografix.com/GPX/1/1"
# xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
# xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
# <trk>
# <trkseg>
# <trkpt lat="60.425494" lon="5.299534"><ele>25.260</ele><time>2006-05-21T16:49:11Z</time></trkpt>
# <trkpt lat="60.425464" lon="5.299610"><ele>24.931</ele><time>2006-05-21T16:49:46Z</time></trkpt>
# <trkpt lat="60.425314" lon="5.299694"><ele>27.975</ele><time>2006-05-21T16:52:04Z</time></trkpt>
# <trkpt lat="60.425384" lon="5.299741"><ele>31.017</ele><time>2006-05-21T16:56:36Z</time></trkpt>
# <trkpt lat="60.425339" lon="5.299958"><ele>30.980</ele><time>2006-05-21T16:56:47Z</time></trkpt>
# <trkpt lat="60.425238" lon="5.299640"><ele>30.538</ele><time>2006-05-21T16:56:56Z</time></trkpt>
# <trkpt lat="60.425246" lon="5.299686"><ele>30.515</ele><time>2006-05-21T16:57:03Z</time></trkpt>
# <trkpt lat="60.425345" lon="5.299773"><ele>31.936</ele><time>2006-05-21T16:59:08Z</time></trkpt>
# <trkpt lat="60.425457" lon="5.299419"><ele>31.794</ele><time>2006-05-21T17:00:54Z</time></trkpt>
# </trkseg>
# </trk>
# </gpx>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
# version="1.1"
# creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
# xmlns="http://www.topografix.com/GPX/1/1"
# xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
# xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
# <trk>
# <name>ACTIVE LOG164705</name>
# <trkseg>
# <trkpt lat="60.425494" lon="5.299534"><ele>25.260</ele><time>2006-05-21T16:49:11Z</time></trkpt>
# <trkpt lat="60.425464" lon="5.299610"><ele>24.931</ele><time>2006-05-21T16:49:46Z</time></trkpt>
# <trkpt lat="60.425314" lon="5.299694"><ele>27.975</ele><time>2006-05-21T16:52:04Z</time></trkpt>
# <trkpt lat="60.425384" lon="5.299741"><ele>31.017</ele><time>2006-05-21T16:56:36Z</time></trkpt>
# <trkpt lat="60.425339" lon="5.299958"><ele>30.980</ele><time>2006-05-21T16:56:47Z</time></trkpt>
# <trkpt lat="60.425238" lon="5.299640"><ele>30.538</ele><time>2006-05-21T16:56:56Z</time></trkpt>
# <trkpt lat="60.425246" lon="5.299686"><ele>30.515</ele><time>2006-05-21T16:57:03Z</time></trkpt>
# <trkpt lat="60.425345" lon="5.299773"><ele>31.936</ele><time>2006-05-21T16:59:08Z</time></trkpt>
# <trkpt lat="60.425457" lon="5.299419"><ele>31.794</ele><time>2006-05-21T17:00:54Z</time></trkpt>
# </trkseg>
# </trk>
# </gpx>
# '
ok - "../gpst -w -o gpx pause.gpx" - Strip whitespace from GPX output (stderr)
not ok - "../gpst -o gpx -w comments.mayko" - Output whitespace-stripped GPX from Mayko file with commented-out lines
#   Failed test '"../gpst -o gpx -w comments.mayko" - Output whitespace-stripped GPX from Mayko file with commented-out lines'
#   in ./run-tests.pl at line 1860.
#          got: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
# version="1.1"
# creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
# xmlns="http://www.topografix.com/GPX/1/1"
# xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
# xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
# <trk>
# <trkseg>
# <trkpt lat="70.6800486" lon="23.6746151"><time>2002-12-22T21:42:24Z</time></trkpt>
# <trkpt lat="70.6799322" lon="23.6740038"><time>2002-12-22T21:42:32Z</time></trkpt>
# <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:42:54Z</time></trkpt>
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:51Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:52Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:54Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <trkpt lat="70.6800774" lon="23.6757566"><time>2002-12-22T21:44:45Z</time></trkpt>
# <trkpt lat="70.6801502" lon="23.6753442"><time>2002-12-22T21:44:52Z</time></trkpt>
# <trkpt lat="70.6801905" lon="23.6757542"><time>2002-12-22T21:45:04Z</time></trkpt>
# </trkseg>
# </trk>
# </gpx>
# '
#     expected: '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
# <gpx
# version="1.1"
# creator="gpst - http://svn.sunbase.org/repos/utils/trunk/src/gpstools/"
# xmlns="http://www.topografix.com/GPX/1/1"
# xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
# xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
# >
# <trk>
# <trkseg>
# <trkpt lat="70.6800486" lon="23.6746151"><time>2002-12-22T21:42:24Z</time></trkpt>
# <trkpt lat="70.6799322" lon="23.6740038"><time>2002-12-22T21:42:32Z</time></trkpt>
# <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:42:54Z</time></trkpt>
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:51Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:52Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <!-- <trkpt lat="70.6796266" lon="23.6723991"><time>2002-12-22T21:43:54Z</time><extensions><error>desc</error></extensions></trkpt> -->
# <trkpt lat="70.6800774" lon="23.6757566"><time>2002-12-22T21:44:45Z</time></trkpt>
# </trkseg>
# <trkseg>
# <trkpt lat="70.6801502" lon="23.6753442"><time>2002-12-22T21:44:52Z</time></trkpt>
# <trkpt lat="70.6801905" lon="23.6757542"><time>2002-12-22T21:45:04Z</time></trkpt>
# </trkseg>
# </trk>
# </gpx>
# '
ok - "../gpst -o gpx -w comments.mayko" - Output whitespace-stripped GPX from Mayko file with commented-out lines (stderr)
# Testing --double-y-scale option...
ok - "../gpst -y -o clean pause.gpx" - Double y scale, clean output from gpx format
ok - "../gpst -y -o clean pause.gpx" - Double y scale, clean output from gpx format (stderr)
ok - "../gpst -y -o clean log.dos.mayko" - Double y scale, clean output from mayko format
ok - "../gpst -y -o clean log.dos.mayko" - Double y scale, clean output from mayko format (stderr)
# Testing --debug option...
# Strip error from Mayko format...
ok - "../gpst -o csv date_error.mayko" - Strip error from mayko format in csv output
ok - "../gpst -o csv date_error.mayko" - Strip error from mayko format in csv output (stderr)
ok - "../gpst -o clean date_error.mayko" - Strip error from mayko format in clean output
ok - "../gpst -o clean date_error.mayko" - Strip error from mayko format in clean output (stderr)
ok - "../gpst -o gpsml date_error.mayko" - Strip error from mayko format in gpsml output
ok - "../gpst -o gpsml date_error.mayko" - Strip error from mayko format in gpsml output (stderr)
ok - "../gpst -o gpx date_error.mayko" - Strip error from mayko format in gpx output
ok - "../gpst -o gpx date_error.mayko" - Strip error from mayko format in gpx output (stderr)
ok - "../gpst -o gpstrans date_error.mayko" - Strip error from mayko format in gpstrans output
ok - "../gpst -o gpstrans date_error.mayko" - Strip error from mayko format in gpstrans output (stderr)
ok - "../gpst -o pgtab date_error.mayko" - Strip error from mayko format in pgtab output
ok - "../gpst -o pgtab date_error.mayko" - Strip error from mayko format in pgtab output (stderr)
ok - "../gpst -o poscount date_error.mayko" - Strip error from mayko format in poscount output
ok - "../gpst -o poscount date_error.mayko" - Strip error from mayko format in poscount output (stderr)
ok - "../gpst -o xgraph date_error.mayko" - Strip error from mayko format in xgraph output
ok - "../gpst -o xgraph date_error.mayko" - Strip error from mayko format in xgraph output (stderr)
ok - "../gpst -o ygraph date_error.mayko" - Strip error from mayko format in ygraph output
ok - "../gpst -o ygraph date_error.mayko" - Strip error from mayko format in ygraph output (stderr)
# Testing finished.
1..215
# Looks like you failed 15 tests of 215.
