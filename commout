#!/usr/bin/perl

# Kommenterer ut stdin.
# $Id: commout,v 1.6 2000/03/19 23:29:57 sunny Exp $

$prog_name = "commout";

if ($#ARGV > -1) {
	$_ = $ARGV[0];
	/^--h/ && &print_help(0) ||
	/^html$/i && ($is_html = 1) ||
	/^pre$/i && ($is_pre = 1) ||
	($comm_pattern = $ARGV[0]);
} else {
	$comm_pattern = '#';
}

length($ARGV[1]) && ($spc_str = " ");

$is_html && print("<!--$spc_str" . $ARGV[1] . "\n") ||
$is_pre && print("<p><pre>\n");

while (<STDIN>) {
	($is_html || $is_pre) || s/^(\t*)/$1$comm_pattern /;
	print;
	$Bck = $_;
}

if ($is_html) {
	$Bck =~ /\n$/ || print(" "); # Hvis stdin ikke slutta med newline, skrives en space.
}

$is_html && print("-->\n") ||
$is_pre && print("</pre>\n");

sub print_help {
	my $Retval = shift;

	print <<END;
Syntax:

$prog_name
  For bruk i bl.a. perl og sh. Setter '#' foran hver linje.

$prog_name html ["Overskrift"]
  HTML-source.

$prog_name pre
  Også til html, men <pre> brukes istedenfor.

$prog_name [andre_ting]
  Setter [andre_ting] foran hver linje.

END
	exit($Retval);
} # print_help()

#### End of file $Id: commout,v 1.6 2000/03/19 23:29:57 sunny Exp $ ####
