<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4//EN" "../../../Tools/dtd/docbook-4.4/docbookx.dtd">
<refentry id="gpst" lang="en">
  <!-- File ID: 84662624-f924-11dd-9043-0001805bf4b1 -->
  <refentryinfo>
    <date><![CDATA[$Id$]]></date>
  </refentryinfo>
  <refmeta>
    <refentrytitle>gpst</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>
  <refnamediv>
    <refname>gpst</refname>
    <refpurpose>Converts between various GPS formats.</refpurpose>
  </refnamediv>
  <refsynopsisdiv>

    <cmdsynopsis>
      <command>gpst</command>
      <arg choice="opt">
        <replaceable>options</replaceable>
      </arg>
      <arg choice="opt" rep="repeat">
        <replaceable>file</replaceable>
      </arg>
    </cmdsynopsis>

    <cmdsynopsis>
      <command>gpst</command>
      <arg choice="req">-S</arg>
      <arg choice="opt">
        <replaceable>options</replaceable>
      </arg>
      <arg choice="opt" rep="repeat">
        <replaceable>file</replaceable>
      </arg>
    </cmdsynopsis>

  </refsynopsisdiv>
  <refsect1 id="gpst.description">
    <title>Description</title>

    <variablelist>

      <varlistentry>
        <term><option>--chronology</option></term>
        <listitem>
          <para>Check for broken chronology, warn about entries with an 
          old timestamp.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-d</option>, <option>--skip-dups</option></term>
        <listitem>
          <para>If succeeding identical coordinates are found, print 
          only the first one and ignore the rest.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-e</option>, <option>--epoch</option></term>
        <listitem>
          <para>Use seconds since 1970-01-01 00:00:00 GMT as date 
          format.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--fix</option></term>
        <listitem>
          <para>Comment out entries which is obviously wrong.
          Use together with <option>--chronology</option> to fix those 
          kind of errors.
          Does not work with GPX output yet.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--from-date 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Used by the <literal>pgwupd</literal> format.
          Specifies from which date waypoints should be updated.
          No checks for valid date format here, let 
          <application>PostgreSQL</application> take care of that.
          All variants it understands can be used here.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-h</option>, <option>--help</option></term>
        <listitem>
          <para>Send a brief help summary to stdout.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--inside</option></term>
        <listitem>
          <para>Print only trackpoints inside a rectangle specified by 
          <option>--pos1</option> and <option>--pos2</option>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-n</option>, <option>--undefined 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Use <replaceable>x</replaceable> as undefined 
          value.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--near</option></term>
        <listitem>
          <para>Add names of the three closest waypoints to the 
          trackpoint.
          Unfinished and experimental, needs <citerefentry> 
          <refentrytitle>gpsbabel</refentrytitle> 
          <manvolnum>1</manvolnum> </citerefentry>, which is called from 
          the program as 
          <command>/usr/local/bin/gpsbabel</command>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-o</option>, <option>--output-format 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Use output format <replaceable>x</replaceable>:</para>
          <variablelist>

            <varlistentry>
              <term><option>clean</option></term>
              <listitem>
                <para>TAB-separated format with longitude, latitude and 
                altitude.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>csv</option></term>
              <listitem>
                <para>TAB-separated format:
                <variablelist>

                  <varlistentry>
                    <term>date</term>
                    <listitem>
                      <para>Date of trackpoint.
                      Format: 
                      <literal><replaceable>yyyy</replaceable>-<replaceable>mm</replaceable>-<replaceable>dd</replaceable>T<replaceable>hh</replaceable>:<replaceable>mm</replaceable>:<replaceable>ss</replaceable>Z</literal> 
                      unless the <option>--epoch</option> option is 
                      specified.
                      If so, it’s represented as number of seconds since 
                      1970-01-01 00:00:00 UTC.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term>longitude</term>
                    <listitem>
                      <para>Longitude, decimal degrees.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term>latitude</term>
                    <listitem>
                      <para>Latitude, decimal degrees.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term>altitude</term>
                    <listitem>
                      <para>Altitude in metres above sea level. 
                      Optional.
                      If not present, the corresponding TAB is also 
                      printed, to keep the number of columns 
                      intact.</para>
                    </listitem>
                  </varlistentry>

                </variablelist></para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>gpsml</option> (Default)</term>
              <listitem>
                <para>Line-based XML which makes it easy to edit and 
                grep.
                In the past, there was this big plan about making this 
                the default storage format, so it was declared as The 
                Honourable Default Output Format.
                But using GPX is the way to go, so this will probably 
                change in the future.
                It’s way too <foreignphrase>de facto</foreignphrase> and 
                widely used, so storing GPS data in anything else is 
                sheer waste of work.
                Probably not finished yet.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>gpstrans</option></term>
              <listitem>
                <para>The format generated by <citerefentry> 
                <refentrytitle>gpstrans</refentrytitle> 
                <manvolnum>1</manvolnum> </citerefentry>.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>gpx</option></term>
              <listitem>
                <para>Not complete yet, but good enough in most 
                cases.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>pgtab</option></term>
              <listitem>
                <para>TAB-separated format for import into 
                <application>PostgreSQL</application>.
                Undefined values are written as <literal>\N</literal> if 
                the <option>--undefined</option> option is not 
                specified.</para>
                <variablelist>

                  <varlistentry>
                    <term><database class="field">date</database></term>
                    <listitem>
                      <para>Format: 
                      <literal><replaceable>yyyy</replaceable>-<replaceable>mm</replaceable>-<replaceable>dd</replaceable>T<replaceable>hh</replaceable>:<replaceable>mm</replaceable>:<replaceable>ss</replaceable>Z</literal></para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">coor</database></term>
                    <listitem>
                      <para>Format:
                      <literal>(<replaceable>lat</replaceable>,<replaceable>lon</replaceable>)</literal></para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">ele</database></term>
                    <listitem>
                      <para>Altitude in metres above sea level.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">name</database></term>
                    <listitem>
                      <para>Short name of closest waypoint.
                      Calculated in 
                      <application>PostgreSQL</application>, so this 
                      value is always <literal>\N</literal>.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">dist</database></term>
                    <listitem>
                      <para>Distance in decimal degrees to closest 
                      waypoint.
                      Calculated in 
                      <application>PostgreSQL</application>, so this 
                      value is always <literal>\N</literal>.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database 
                    class="field">description</database></term>
                    <listitem>
                      <para>Description of waypoint.
                      Calculated in 
                      <application>PostgreSQL</application>, so this 
                      value is always <literal>\N</literal>.</para>
                    </listitem>
                  </varlistentry>

                </variablelist>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>pgwtab</option></term>
              <listitem>
                <para>Output waypoints on a TAB-separated format:</para>
                <variablelist>

                  <varlistentry>
                    <term><database class="field">coor</database></term>
                    <listitem>
                      <para>Format:
                      <literal>(<replaceable>lat</replaceable>,<replaceable>lon</replaceable>)</literal></para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">name</database></term>
                    <listitem>
                      <para>Title of waypoint.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">ele</database></term>
                    <listitem>
                      <para>Elevation in metres above sea level.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">type</database></term>
                    <listitem>
                      <para>Type of waypoint, same as the GPX <sgmltag 
                      class="starttag">type</sgmltag> element.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">time</database></term>
                    <listitem>
                      <para>Timestamp of waypoint.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">cmt</database></term>
                    <listitem>
                      <para>Short waypoint description, used by the GPS 
                      as a comment.
                      Same as the GPX <sgmltag 
                      class="starttag">cmt</sgmltag> element.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database 
                    class="field">descr</database></term>
                    <listitem>
                      <para>Long description, not used by the GPS.
                      Same as the GPX <sgmltag 
                      class="starttag">desc</sgmltag> element.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">src</database></term>
                    <listitem>
                      <para>Source of data, same as the <sgmltag 
                      class="starttag">src</sgmltag> GPX element.</para>
                    </listitem>
                  </varlistentry>

                  <varlistentry>
                    <term><database class="field">sym</database></term>
                    <listitem>
                      <para>GPS symbol name.
                      Same as the <sgmltag 
                      class="starttag">sym</sgmltag> GPX element.</para>
                    </listitem>
                  </varlistentry>

                </variablelist>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>pgwupd</option></term>
              <listitem>
                <para>Output waypoints as SQL transactions which updates  
                the <database class="field">name</database> and 
                <database class="field">dist</database> columns.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>poscount</option></term>
              <listitem>
                <para>Creates a 3D plot where areas with many 
                trackpoints are higher than areas with less track 
                points.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>ps</option></term>
              <listitem>
                <para>Postscript. Unfinished.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>svg</option></term>
              <listitem>
                <para>Unfinished.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>xgraph</option></term>
              <listitem>
                <para>Input format for <citerefentry> 
                <refentrytitle>xgraph</refentrytitle> 
                <manvolnum>1</manvolnum> </citerefentry>.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>ygraph</option></term>
              <listitem>
                <para>Input format for <citerefentry> 
                <refentrytitle>ygraph</refentrytitle> 
                <manvolnum>1</manvolnum> </citerefentry>.</para>
              </listitem>
            </varlistentry>

          </variablelist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--outside</option></term>
        <listitem>
          <para>Print only trackpoints outside a rectangle specified by 
          <option>--pos1</option> and <option>--pos2</option>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--pos1 
        <replaceable>x1</replaceable>,<replaceable>y1</replaceable></option></term>
        <term><option>--pos2 
        <replaceable>x2</replaceable>,<replaceable>y2</replaceable></option></term>
        <listitem>
          <para>Specifies corners of an area rectangle used by the 
          <option>--inside</option> and <option>--outside</option> 
          options.
          The <replaceable>x</replaceable> and 
          <replaceable>y</replaceable> values are specified as decimal 
          degrees, negative for west or south.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-r</option>, <option>--require 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Specify requirements for trackpoints to be written.
          <replaceable>x</replaceable> is a string with the following 
          flags:</para>
          <variablelist>

            <varlistentry>
              <term><option>e</option></term>
              <listitem>
                <para>Print only waypoints which have an 
                elevation.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>p</option></term>
              <listitem>
                <para>Print only waypoints which have a position.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><option>t</option></term>
              <listitem>
                <para>Print only waypoints which have a 
                timestamp.</para>
              </listitem>
            </varlistentry>

          </variablelist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-R</option>, <option>--round 
        <replaceable>x</replaceable>=<replaceable>y</replaceable><optional>,<replaceable>x2</replaceable>=<replaceable>y2</replaceable><optional>...</optional></optional></option></term>
        <listitem>
          <para>Round trackpoint element <replaceable>x</replaceable> to 
          <replaceable>y</replaceable> decimals.</para>
          <para>Example:</para>
          <blockquote>
            <para><option>--round lat=4,lon=5,ele=1</option></para>
          </blockquote>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-s</option>, <option>--short-date</option></term>
        <listitem>
          <para>Use short date format.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-S</option>, <option>--save-to-file 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Save the unconverted data to a file with a filename 
          starting with the timestamp of the first trackpoint.
          The parameter string <replaceable>x</replaceable> is added at 
          the end of the filename.
          For the time being this option will ignore all other 
          options.</para>
          <note>
            <para>If several files are specified on the command line, 
            all data will be saved into only one file.
            This behaviour may change in the future.</para>
          </note>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-t</option>, 
        <option>--create-breaks</option></term>
        <listitem>
          <para>Create breaks in track between points with a difference 
          more than the number of seconds specified by the 
          <envar>PAUSE_LIMIT</envar> variable.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-T <replaceable>x</replaceable></option>, 
        <option>--time-shift 
        <replaceable>x</replaceable></option></term>
        <listitem>
          <para>Move timestamps <replaceable>x</replaceable> seconds 
          forwards or backwards in output.
          <replaceable>x</replaceable> can be a positive or negative 
          integer.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-v</option>, <option>--verbose</option></term>
        <listitem>
          <para>Verbose output, can be repeated.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--version</option></term>
        <listitem>
          <para>Print program version information.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-w</option>, 
        <option>--strip-whitespace</option></term>
        <listitem>
          <para>Strip all unnecessary whitespace.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-y</option>, 
        <option>--double-y-scale</option></term>
        <listitem>
          <para>Double Y scale (latitude).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--debug</option></term>
        <listitem>
          <para>Print debugging messages.</para>
        </listitem>
      </varlistentry>

    </variablelist>

  </refsect1>
  <refsect1 id="gpst.bugs">
    <title>Bugs and things that need to be done</title>

    <itemizedlist>

      <listitem>
        <para>Pretty incomplete in some areas.
        Some of the source formats are undocumented and thus incomplete.
        Some functionality is not working properly, for example the 
        Postscript output.</para>
      </listitem>

      <listitem>
        <para>Remove hardcodings.</para>
      </listitem>

      <listitem>
        <para>Translate database column names to English.</para>
      </listitem>

      <listitem>
        <para>Add more tests to cover all command-line options.</para>
      </listitem>

    </itemizedlist>

  </refsect1>
  <refsect1 id="gpst.author">
    <title>Author</title>

    <para>Made by <personname><firstname>Øyvind</firstname> 
    <othername>A.</othername> <surname>Holm</surname></personname> 
    <email>sunny@sunbase.org</email>.</para>

  </refsect1>
  <refsect1 id="gpst.copyright">
    <title>Copyright</title>

    <para>Copyleft © <personname><firstname>Øyvind</firstname> 
    <othername>A.</othername> <surname>Holm</surname></personname> 
    <email>sunny@sunbase.org</email>.
    This is free software; see the file <filename>COPYING</filename> for 
    legalese stuff.</para>

  </refsect1>
  <refsect1 id="gpst.license">
    <title>License</title>

    <para>This program is free software; you can redistribute it and/or 
    modify it under the terms of the <citetitle>GNU General Public 
    License</citetitle> as published by the <orgname 
    class="nonprofit">Free Software Foundation</orgname>; either version 
    2 of the License, or (at your option) any later version.</para>

    <para>This program is distributed in the hope that it will be 
    useful, but <emphasis>WITHOUT ANY WARRANTY</emphasis>; without even 
    the implied warranty of <emphasis>MERCHANTABILITY</emphasis> or 
    <emphasis>FITNESS FOR A PARTICULAR PURPOSE</emphasis>.
    See the GNU General Public License for more details.</para>

    <para>You should have received a copy of the GNU General Public 
    License along with this program; if not, write to
<address>The Free Software Foundation, Inc.
<street>59 Temple Place</street>, <otheraddr>Suite 330</otheraddr>
<city>Boston</city>, <state>MA</state> <postcode>02111-1307</postcode>
<country>USA</country></address></para>

  </refsect1>
  <refsect1 id="gpst.seealso">
    <title>See also</title>

    <para><citerefentry>
      <refentrytitle>gpsbabel</refentrytitle>
      <manvolnum>1</manvolnum>
    </citerefentry></para>

  </refsect1>
  <!-- vim: set tw=72 ts=2 sts=2 sw=2 et fo=tcqw fenc=UTF-8 : -->
</refentry>
