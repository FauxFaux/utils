#!/bin/bash

#=======================================================================
# $Id$
# Oppdaterer ~/src/other/vim/vim.clean
#=======================================================================

vimclean=$HOME/src/other/vim/vim.clean

# [ -e /carmbb.mrk ] && { echo "Man er på carmbb, og her er det som kjent dårlig med nettkontakt. Synd, egentlig." >&2; exit 1; }

[ -d $vimclean ] || { echo "$vimclean: Katalogen finnes ikke. Dauer." >&2; exit 1; }

cd $vimclean || { echo "Nåh, klarte ikke \"cd $vimclean\" selv om den visstnok finnes. Skjønner ikke bæret og driter i resten." >&2; exit 1; }
until cvs upd -dC; do
    echo -n sleep 20...
    sleep 20
    echo våken.
done

errfound=0
for _vp in $HOME/bin/Patch/vim/*; do
    echo ======== Patcher $_vp ========
    patch -p0 <$_vp || { echo "Feil under patchinga." >&2; errfound=1; }
done
[ "$errfound" = "1" ] && { exit 1; }
exit 0

# vim: set ts=4 sw=4 sts=4 et fo+=w fenc=utf8 :
