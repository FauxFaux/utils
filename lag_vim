#!/bin/bash

# $Id: lag_vim,v 1.5 2004/03/28 07:28:17 sunny Exp $
# Mekker ihop ny, fin Vim.

update_vim-clean

echo ======== mincvs_vim
mincvs_vim || { echo "Et eller annet speist skjedde med mincvs_vim. Kreperer." >&2; exit 1; }

cd ~/src/other/vim/vim || { echo "cd ~/src/other/vim/vim: Ånn ðe tryn." >&2; exit 1; }

x_flags="--enable-gui=no --without-x"
vim_size=huge

if [ -e $HOME/.petronas.mrk -o -e $HOME/.vagabond.mrk ]; then
	echo ======== Man er på petronas eller vagabond. Lag lokal vim.
	vimdir=$HOME/local/prg/vim
	[ -e $HOME/.vagabond.mrk ] && vim_size=normal
else
	vimdir=/usr/local/prg/vim
	if [ -e /ba0614-woody.mrk ]; then
		echo ======== Er på ba0614, lag feita Vim med X og gode greia
		x_flags="--with-x --enable-gui=gtk"
	fi
fi

echo ======== ./configure --prefix=$vimdir --with-features=$vim_size --enable-multibyte $x_flags
./configure --prefix=$vimdir --with-features=$vim_size --enable-multibyte $x_flags

echo ======== make
make
echo

if [ -e $HOME/.petronas.mrk -o -e $HOME/.vagabond.mrk ]; then
	# installcmd="rm -rf $vimdir && make install"
	echo Vi er på petronas eller vagabond, så vi nøyer oss med:
else
	# installcmd="su -c \"rm -rf $vimdir && make install\""
	echo Hvis det gikk bra, er det på tide å bli root, og...
fi
echo "rm -rf $vimdir && make install"

# echo $installcmd
# echo -n Trykk Enter for å gjøre det, eller CTRL-C for å feige ut...
# read
# $installcmd
