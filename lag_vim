#!/bin/bash

# $Id: lag_vim,v 1.4 2004/02/13 18:55:47 sunny Exp $
# Mekker ihop ny, fin Vim.

update_vim-clean

echo ======== mincvs_vim
mincvs_vim || { echo "Et eller annet speist skjedde med mincvs_vim. Kreperer." >&2; exit 1; }

cd ~/src/other/vim/vim || { echo "cd ~/src/other/vim/vim: Ånn ðe tryn." >&2; exit 1; }

x_flags="--enable-gui=no --without-x"

if [ -e $HOME/.petronas.mrk ]; then
	echo ======== Man er på petronas. Lag lokal vim.
	vimdir=$HOME/local/prg/vim
else
	vimdir=/usr/local/prg/vim
	if [ -e /ba0614-woody.mrk ]; then
		echo ======== Er på ba0614, lag feita Vim med X og gode greia
		x_flags="--with-x --enable-gui=gtk"
	fi
fi

echo ======== ./configure --prefix=$vimdir --with-features=huge --enable-multibyte $x_flags
./configure --prefix=$vimdir --with-features=huge --enable-multibyte $x_flags

echo ======== make
make
echo

if [ -e $HOME/.petronas.mrk ]; then
	# installcmd="rm -rf $vimdir && make install"
	echo Vi er på petronas, så vi nøyer oss med det.
else
	# installcmd="su -c \"rm -rf $vimdir && make install\""
	echo Hvis det gikk bra, er det på tide å bli root, og...
fi
echo "rm -rf $vimdir && make install"

# echo $installcmd
# echo -n Trykk Enter for å gjøre det, eller CTRL-C for å feige ut...
# read
# $installcmd
